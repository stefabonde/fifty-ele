<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fifty Elena ‚ù§Ô∏è</title>

<!-- Uploadcare widget -->
<script>
  UPLOADCARE_PUBLIC_KEY = 'e30c2f221ab2dbb103b9';
</script>
<script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>

<style>
  body {
    margin: 0; padding: 0;
    font-family: "Poppins", sans-serif;
    text-align: center;
    overflow-x: hidden;
    background: radial-gradient(circle at center,
      #4b0a16 0%, #2b040a 40%, #130106 70%, #000000 100%);
  }

  .container { max-width: 900px; margin:auto; padding:20px; color:white; }

  h1 { font-size:2.6em; margin-top:20px; margin-bottom:10px; font-weight:700;
       background:linear-gradient(90deg,#ffffff,#ffd5dd,#ffb8c6);
       -webkit-background-clip:text; color:transparent; opacity:0;
       animation:fadeIn 1.5s ease forwards 0.3s; }

  .main-image-wrapper { margin-top:25px; width:100vw; position:relative; left:50%; transform:translateX(-50%); }
  .main-image { width:100vw; max-width:900px; border-radius:18px; display:block; margin:0 auto;
       box-shadow:0 0 40px rgba(255,80,120,0.7),0 0 80px rgba(255,80,120,0.4),0 0 120px rgba(255,80,120,0.2);
       opacity:0; transform:translateY(30px); animation:fadeUp 1.4s ease forwards 0.5s; }

  .section { margin-top:60px; opacity:0; transform:translateY(40px); transition: all 0.9s ease; }
  .section.visible { opacity:1; transform:translateY(0); }
  .section h2 { font-size:1.9em; background:linear-gradient(90deg,#fff,#ffc9d5); -webkit-background-clip:text; color:transparent; }
  .section p { font-size:1.2em; line-height:1.6; color:#ffdde5; }

  @keyframes fadeIn { from {opacity:0} to {opacity:1} }
  @keyframes fadeUp { from {opacity:0; transform:translateY(30px);} to {opacity:1; transform:translateY(0);} }

  /* Slideshow */
  #counter { margin-top:20px; font-size:16px; color:#ffb0c0; }
  .slideshow { margin-top:10px; width:100%; max-width:900px; margin-left:auto; margin-right:auto; position:relative; }
  .slideshow img.main-slide { width:100%; border-radius:18px; cursor:pointer; box-shadow:0 0 30px rgba(255,80,120,0.4),0 0 60px rgba(255,80,120,0.2); opacity:0; transition:opacity 0.8s ease; }
  .arrow { position:absolute; top:50%; transform:translateY(-50%); cursor:pointer; user-select:none; opacity:0.8; transition:0.2s; width:60px; height:60px; }
  .arrow:hover{opacity:1;}
  .arrow.left{left:-30px;}
  .arrow.right{right:-30px;}

  /* Miniature */
  .thumbnails { margin-top:10px; display:flex; justify-content:center; flex-wrap:wrap; gap:5px; overflow-x:auto; }
  .thumbnails img { width:80px; height:50px; object-fit:cover; border-radius:8px; cursor:pointer; border:2px solid transparent; transition:0.2s; flex-shrink:0; }
  .thumbnails img.active { border-color:#ff80a0; }

  /* Fullscreen */
  #fullscreen { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.92); backdrop-filter:blur(4px); justify-content:center; align-items:center; z-index:9999; }
  #fullscreen img { max-width:90%; max-height:90%; border-radius:10px; transition:transform 0.3s ease; }
  #fullscreen .nav { position:absolute; top:50%; transform:translateY(-50%); cursor:pointer; user-select:none; padding:20px; opacity:0.8; width:60px; height:60px; }
  #fs-left { left:20px; } #fs-right { right:20px; }

  /* Upload button */
  #upload-container { margin-top:20px; }

  /* Notification */
  #notification { position:fixed; top:20px; left:50%; transform:translateX(-50%); background:#ff6699; color:white; padding:10px 20px; border-radius:20px; opacity:0; pointer-events:none; transition:opacity 0.5s ease; z-index:10000; }

  /* Footer */
  footer { margin-top:80px; padding:30px; color:#ffceda; font-size:14px; opacity:0.9; }
  .footer-links a { display:block; margin:6px 0; color:#ffd9e5; text-decoration:none; font-size:15px; }
  .footer-links a:hover{color:white;}
</style>
</head>
<body>

<div class="container">
  <div class="main-image-wrapper">
    <img class="main-image" src="https://stefabonde.github.io/fifty-ele/test.png" alt="Immagine">
  </div>

  <div class="section">
    <h2>üåü Buon compleanno Elena!</h2>
    <p>Ti vogliamo bene ‚ù§Ô∏è</p>
  </div>

  <!-- Contatore -->
  <div id="counter">üì∏ 0 foto caricate</div>

  <!-- Slideshow -->
  <div id="slideshow" class="slideshow">
    <img class="arrow left" src="https://upload.wikimedia.org/wikipedia/commons/8/8c/Chevron_left_font_awesome.svg" onclick="prevSlide()">
    <img id="slide-img" class="main-slide" src="" alt="Slideshow" onclick="openFullscreen()">
    <img class="arrow right" src="https://upload.wikimedia.org/wikipedia/commons/2/23/Chevron_right_font_awesome.svg" onclick="nextSlide()">
  </div>

  <!-- Thumbnails -->
  <div class="thumbnails" id="thumbnails"></div>

  <!-- Upload -->
  <div id="upload-container">
    <input type="hidden" role="uploadcare-uploader" id="upload" data-multiple="true" data-clearable="true">
  </div>
</div>

<!-- Fullscreen -->
<div id="fullscreen" onclick="closeFullscreen(event)">
  <img id="fs-left" class="nav" src="https://upload.wikimedia.org/wikipedia/commons/8/8c/Chevron_left_font_awesome.svg" onclick="prevFullscreen(event)">
  <img id="fs-img" src="">
  <img id="fs-right" class="nav" src="https://upload.wikimedia.org/wikipedia/commons/2/23/Chevron_right_font_awesome.svg" onclick="nextFullscreen(event)">
</div>

<!-- Notification -->
<div id="notification">üì∏ Foto caricata!</div>

<!-- Footer -->
<footer>
  <div class="footer-links">
    <a href="https://stefabonde.github.io/fifty-ele/extra/colora-elena.pdf" target="_blank">üìÑ Istruzioni per raggiungere la festa</a>
    <a href="#" onclick="alert('Lo zip delle foto sar√† disponibile a fine evento!')">üì¶ Scarica tutte le foto (disponibile a fine evento)</a>
  </div>
  <div style="margin-top:10px;">SB</div>
</footer>

<script>
  // Sezioni fadeIn
  const sections = document.querySelectorAll('.section');
  function checkScroll(){ const trigger = window.innerHeight*0.8;
    sections.forEach(sec=>{ const rect = sec.getBoundingClientRect();
      if(rect.top < trigger) sec.classList.add('visible'); });
  }
  window.addEventListener('scroll',checkScroll);
  window.addEventListener('load',checkScroll);

  // Slideshow
  let slideIdx = 0;
  let images = [];
  const slideImg = document.getElementById("slide-img");
  const thumbnailsDiv = document.getElementById("thumbnails");
  const counterDiv = document.getElementById("counter");

  function updateSlide(){
    if(!images.length) return;
    slideImg.style.opacity=0;
    setTimeout(()=>{
      slideImg.src=images[slideIdx];
      slideImg.onload=()=>slideImg.style.opacity=1;
      updateThumbnails();
      updateCounter();
    },200);
  }

  function nextSlide(){ if(!images.length) return; slideIdx=(slideIdx+1)%images.length; updateSlide();}
  function prevSlide(){ if(!images.length) return; slideIdx=(slideIdx-1+images.length)%images.length; updateSlide();}
  setInterval(()=>{ if(images.length>0) nextSlide(); },4000);

  // Thumbnails
  function updateThumbnails(){
    thumbnailsDiv.innerHTML='';
    images.forEach((img,i)=>{
      const thumb = document.createElement('img');
      thumb.src=img;
      if(i===slideIdx) thumb.classList.add('active');
      thumb.onclick=()=>{slideIdx=i; updateSlide();}
      thumb.setAttribute('download','foto'+(i+1)+'.jpg'); // tasto download touch
      thumbnailsDiv.appendChild(thumb);
    });
  }

  // Counter
  function updateCounter(){
    counterDiv.textContent = `üì∏ ${images.length} foto caricate`;
  }

  // Fullscreen
  const fs = document.getElementById("fullscreen");
  const fsImg = document.getElementById("fs-img");

  function openFullscreen(){ if(!images.length) return; fs.style.display="flex"; fsImg.src=images[slideIdx]; }
  function closeFullscreen(e){ if(e.target!==fs) return; fs.style.display="none"; }
  function nextFullscreen(e){ e.stopPropagation(); nextSlide(); fsImg.src=images[slideIdx]; }
  function prevFullscreen(e){ e.stopPropagation(); prevSlide(); fsImg.src=images[slideIdx]; }

  // Pinch & wheel zoom
  let scale=1;
  fsImg.addEventListener('wheel', e=>{ e.preventDefault(); scale += -e.deltaY*0.001; scale=Math.min(Math.max(0.5,scale),3); fsImg.style.transform=`scale(${scale})`; });
  let startDist=0;
  fsImg.addEventListener('touchstart', e=>{ if(e.touches.length===2){ startDist=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY); } });
  fsImg.addEventListener('touchmove', e=>{ if(e.touches.length===2){ const dist=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY); let newScale = scale*(dist/startDist); newScale=Math.min(Math.max(0.5,newScale),3); fsImg.style.transform=`scale(${newScale})`; } });

  // Notification
  const notification = document.getElementById('notification');
  function showNotification(msg){ notification.textContent=msg; notification.style.opacity=1; setTimeout(()=>notification.style.opacity=0,2000); }

  // Uploadcare
  const uploader = uploadcare.Widget('#upload');
  uploader.onUploadComplete(file=>{
    images.push(file.cdnUrl);
    slideIdx=images.length-1;
    updateSlide();
    showNotification('üì∏ Foto caricata!');
  });

</script>
</body>
</html>
